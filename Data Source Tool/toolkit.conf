# Toolkit CLI configuration
#
# https://toolkit.phdata.io/docs/toolkit-cli#configuration
#
# Customize the configuration for each tool as necessary. You can safely remove config for tools that you do not use.
connections{
  sqs_db1 {
    url="jdbc:sqlserver://db-adventureworks.c5mq5l7iwu9j.us-east-1.rds.amazonaws.com:1433;DatabaseName=master;encrypt=true;trustServerCertificate=true";
    username = "ADE_2025_02"
    password = "StrongPssw0rd!"
  }

  snowflake_db2 {
    url="jdbc:snowflake://BYISXQC-GMB19878.snowflakecomputing.com"
    username = "rchethan"
    password = "Chethakrbhat@7353"
    properties {
      role = SYSADMIN
    }
  }
}
# Data Source Tool - a multipurpose tool for collecting and comparing data source metadata
# https://toolkit.phdata.io/docs/data-source#configuration
ds {
  # https://toolkit.phdata.io/docs/data-source#match-configuration
  match {
    # Increase to avoid false positive matches, decrease to match names with greater differences
    relationMinScore = 0
    columnMinScore = 0
  }

  profile{
    views = true
  }

  # https://toolkit.phdata.io/docs/data-source#data-source-configuration
  datasources {
    sap_source {
        connection = ${connections.sqs_db1}
        filters{
          database{
            includePattern = "AdventureWorksDW"
          }
          schema {
            includePattern = "dbo"
          }
          table {
            includePattern = "DatabaseLog|DimAccount|DimCurrency|DimCustomer|DimDate|DimDepartmentGroup|DimEmployee|DimGeography|DimOrganization|DimProduct|DimProductCategory|DimProductSubCategory|DimPromotion|DimReseller|DimSalesReason|DimSalesTerritory|DimScenario|FactAdditionalInternationalProductDescription|FactCallCenter|FactCurrencyRate|FactFinance|FactInternetSales|FactInternetSalesReason|FactProductInventory|FactResellerSales|FactSalesQuota|FactSurveyResponse|NewFactCurrencyRate|ProspectiveBuyer|sysdiagrams"
          }
          view {
            enabled = true
            includePattern = "vDMPrep|vTimeSeries|vTargetMail|vAssocSeqOrders|vAssocSeqLineItems"
          }
        }
      # profile {
      #   conditions = [
      #     {
      #       name = "Row count mismatch between DBs"
      #       condition = "WHERE DepartmentGroupKey != 0"
      #       filters {
      #         database{
      #           includePattern = "AdventureWorksDW"
      #         }
      #         schema {
      #           includePattern = "dbo"
      #         }
      #         table {
      #           includePattern = "DimDepartmentGroup"
      #         }
      #         view {
      #           enabled = true
      #           includePattern = "VTARGETMAIL"
      #         }
      #       }
      #     }

      #   ]
          
      # }
    }
    sap_target {
          connection = ${connections.snowflake_db2}
          filters{
            database{
              includePattern = "QA_DB"
            }
            schema {
              includePattern = "DBO"
            }
            table {
              includePattern = "DatabaseLog|DimAccount|DimCurrency|DimCustomer|DimDate|DimDepartmentGroup|DimEmployee|DimGeography|DimOrganization|DimProduct|DimProductCategory|DimProductSubCategory|DimPromotion|DimReseller|DimSalesReason|DimSalesTerritory|DimScenario|FactAdditionalInternationalProductDescription|FactCallCenter|FactCurrencyRate|FactFinance|FactInternetSales|FactInternetSalesReason|FactProductInventory|FactResellerSales|FactSalesQuota|FactSurveyResponse|NewFactCurrencyRate|ProspectiveBuyer|sysdiagrams"
            }
            view {
              enabled = true
              includePattern = "vDMPrep|vTimeSeries|vTargetMail|vAssocSeqOrders|vAssocSeqLineItems"
            }
          }
        # profile {
        #   conditions = [
        #     {
        #       name = "Row count mismatch between DBs"
        #       condition = "WHERE DepartmentGroupKey != 0"
        #       filters {
        #         database{
        #           includePattern = "DEV_DB"
        #         }
        #         schema {
        #           includePattern = "DBO"
        #         }
        #         table {
        #           includePattern = "DimDepartmentGroup"
        #         }
        #         view {
        #           enabled = true
        #           includePattern = "VTARGETMAIL"
        #         }
        #       }
        #     }
        #   ]  
        # }
    }
  }
}

# Advisor Tool - check your Snowflake account for best practicies, security, performance, and compute
# https://toolkit.phdata.io/docs/advisor#configuration
advisor {

}

# Provision Tool - manage Snowflake resource lifecycles
# https://toolkit.phdata.io/docs/provision#configuration
provision {
  connection{
      url = "jdbc:snowflake://BYISXQC-GMB19878.snowflakecomputing.com"
      properties {
        user = DECAPSTONETEAM2
        role = ACCOUNTADMIN
        private_key_file = "rsa_key.p8"
  }
 }
}

# SQL Tool - translate SQL from one dialect to another
# https://toolkit.phdata.io/docs/sql-translation#configuration
sql {

}
